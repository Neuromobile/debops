{# Copyright (C) 2020 Pedro Luis Lopez <pedroluis.lopezsanchez@gmail.com>
 # Copyright (C) 2020 Innobyte Bechea Leonardo <https://www.innobyte.com/>
 # Copyright (C) 2020 Innobyte Alin Alexandru <https://www.innobyte.com/>
 # Copyright (C) 2020 DebOps <https://debops.org/>
 # SPDX-License-Identifier: GPL-3.0-or-later
 #}
{% set influxdb__tpl_delegate_to = ansible_local.influxdb.delegate_to if (ansible_local|d() and ansible_local.influxdb|d() and ansible_local.influxdb.delegate_to|d()) else influxdb_server__delegate_to %}
{% set influxdb__tpl_port        = ansible_local.influxdb.port        if (ansible_local|d() and ansible_local.influxdb|d() and ansible_local.influxdb.port|d())        else influxdb_server__port %}
{% set influxdb__tpl_server      = ansible_local.influxdb.server      if (ansible_local|d() and ansible_local.influxdb|d() and ansible_local.influxdb.server|d())      else influxdb_server__delegate_to if influxdb_server__pki else "localhost" %}
{
"delegate_to": "{{ influxdb__tpl_delegate_to }}",
"port": "{{ influxdb__tpl_port }}",
"server": "{{ influxdb__tpl_server }}"
}
